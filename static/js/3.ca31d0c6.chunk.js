(this.webpackJsonpsan3etna=this.webpackJsonpsan3etna||[]).push([[3],{325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),o=(a(325),a(11),a(89),a(14)),l=a(18),s=a(20),i=a.n(s),u=a(29),f=a(23),m=a(1),d=a(6),b=a(3),h=a.n(b),g=a(70),E={id:h.a.any,href:h.a.string,onClick:h.a.func,title:h.a.node.isRequired,disabled:h.a.bool,menuRole:h.a.string,rootCloseEvent:h.a.string,bsPrefix:h.a.string,variant:h.a.string,size:h.a.string},p=c.a.forwardRef((function(e,t){var a=e.title,n=e.children,r=e.bsPrefix,o=e.rootCloseEvent,l=e.variant,s=e.size,i=e.menuRole,u=e.disabled,f=e.href,b=e.id,h=Object(d.a)(e,["title","children","bsPrefix","rootCloseEvent","variant","size","menuRole","disabled","href","id"]);return c.a.createElement(g.a,Object(m.a)({ref:t},h),c.a.createElement(g.a.Toggle,{id:b,href:f,size:s,variant:l,disabled:u,childBsPrefix:r},a),c.a.createElement(g.a.Menu,{role:i,rootCloseEvent:o},n))}));p.displayName="DropdownButton",p.propTypes=E;var v=p,D=a(137),j=a(312),O=a(318),I=a(304),y=a(301),C=a(300),N=a(17),w=(a(326),a(16)),k=a.n(w),x=(a(48),Object(N.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t=e.currentUser,a=e.craft,n=e.crafterID,o=e.displayName,l=Object(r.useState)(!1),s=Object(f.a)(l,2),m=s[0],d=s[1],b=Object(r.useState)(""),h=Object(f.a)(b,2),E=h[0],p=h[1],N=Object(r.useState)(""),w=Object(f.a)(N,2),x=w[0],R=w[1],q=Object(r.useState)(""),z=Object(f.a)(q,2),S=z[0],U=z[1],P=Object(r.useState)(!1),L=Object(f.a)(P,2),T=L[0],W=L[1],B=Object(r.useState)([]),J=Object(f.a)(B,2),M=J[0],A=J[1],F=(new Date,function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.collection("requests").get().then(console.log("hello there "));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})),A(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){F()}),[]),Object(r.useEffect)((function(){G()}),[M]);var G=function(){M.forEach((function(e){t.userID==e.userID&&n==e.crafterID&&(console.log("you have made this request "),W(!0))}))},H=function(){Q(),d(!1)},K=k.a.firestore(),Q=function(){p(""),U(""),R("")},V=function(){var e=Object(u.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.collection("requests").get().then(console.log("hello there "));case 2:n=e.sent,n.docs.map((function(e){return e.data()})).forEach((function(e){e.userID==t.userID&&a==e.crafterID&&K.collection("requests").doc("".concat(e.requestID)).delete().then((function(){console.log("deleted successfully "),W(!1)})).catch((function(e){console.log(e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,T?c.a.createElement(v,{variant:"success",id:"dropdown-basic-button",title:"\u062a\u0645 \u0627\u0644\u0637\u0644\u0628 \u0628\u0646\u062c\u0627\u062d "},c.a.createElement(g.a.Item,{onClick:function(){V(n)}},"\u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628 ")):c.a.createElement(D.a,{onClick:function(){d(!0),console.log(n)}},"\u0627\u0637\u0644\u0628 \u0627\u0644\u0622\u0646"),c.a.createElement(O.a,{open:m,onClose:H,"aria-labelledby":"form-dialog-title"},c.a.createElement(C.a,{id:"form-dialog-title"},"\u0627\u0631\u0633\u0627\u0644 \u0637\u0644\u0628 "),c.a.createElement(y.a,null,c.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"name",label:" \u0627\u0644\u0627\u0633\u0645 \u0643\u0627\u0645\u0644\u0627",type:"text",fullWidth:!0,onChange:function(e){p(e.target.value)}}),c.a.createElement(j.a,{margin:"dense",id:"address",label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644",type:"address",fullWidth:!0,onChange:function(e){U(e.target.value)}}),c.a.createElement(j.a,{margin:"dense",id:"pn",label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",type:"tel",fullWidth:!0,onChange:function(e){R(e.target.value)}})),c.a.createElement(I.a,null,c.a.createElement(D.a,{className:"mr-0 ml-2",disabled:!(E&&x&&S),onClick:function(){var e=k.a.firestore.Timestamp.fromDate(new Date),r=Math.random().toString(36).substr(2,9);K.collection("requests").doc("".concat(r)).set({clientName:"".concat(E),userID:"".concat(t.userID),phoneNumber:"".concat(x),address:S,createdAt:e,crafterID:"".concat(n),requestID:"".concat(r),crafterName:"".concat(o),craft:"".concat(a),accepted:"".concat(!1)}).then((function(){console.log("Document successfully written!"),U(""),Q(),H(),W(!0)})).catch((function(e){console.error("Error writing document: ",e)}))}},"\u0627\u0631\u0633\u0627\u0644"),c.a.createElement(D.a,{variant:"danger",onClick:H},"\u0627\u063a\u0644\u0627\u0642 "))))})));t.default=function(e){e.imageCraftURL;var t=e.crafterID,a=e.imagePersonalURL,r=e.craft,s=e.displayName,i=e.address,u=(e.userID,e.phoneNumber),f=Object(n.a)(e,["imageCraftURL","crafterID","imagePersonalURL","craft","displayName","address","userID","phoneNumber"]);return c.a.createElement("div",Object.assign({className:"col-12 col-md-6 col-lg-3 mb-5 col craft-card"},f),c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"image-container"},c.a.createElement("img",{src:"".concat(a)})),c.a.createElement("div",{className:"details"},c.a.createElement("h5",null,c.a.createElement(l.a,{icon:o.m,size:"sm",transform:"left-4",color:"#3587D7"}),s),c.a.createElement("h5",null," ",c.a.createElement(l.a,{icon:o.f,size:"sm",transform:"left-4",color:"#3587D7"})," ",u),c.a.createElement("h5",null,c.a.createElement(l.a,{icon:o.j,size:"sm",transform:"left-4",color:"#3587D7"}),r),c.a.createElement("h5",null,c.a.createElement(l.a,{icon:o.a,size:"sm",transform:"left-4",color:"#3587D7"}),i),console.log("the name is : ",s),c.a.createElement(x,{crafterID:t,craft:r,displayName:s}))))}}}]);
//# sourceMappingURL=3.ca31d0c6.chunk.js.map